{"ast":null,"code":"import _slicedToArray from\"C:/Users/andyc/Desktop/Web Programs/Wordle with Friends/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useNavigate}from\"react-router-dom\";import{useState,useEffect,useRef}from'react';import'../../css/GamePage.css';import Notification from'../Notification.jsx';import ColoredRow from'../ColoredRow.jsx';import Game from'../Game.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GamePage=function GamePage(_ref){var socket=_ref.socket,settings=_ref.settings,permission=_ref.permission,getPermission=_ref.getPermission;var _useState=useState({key:'',time:0}),_useState2=_slicedToArray(_useState,2),userInput=_useState2[0],setUserInput=_useState2[1];var _useState3=useState({name:'------',id:socket.id,leader:false}),_useState4=_slicedToArray(_useState3,2),currentPlayer=_useState4[0],setCurrentPlayer=_useState4[1];var canType=useRef(false);var navigate=useNavigate();var message=useRef('');var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),visible=_useState6[0],setVisible=_useState6[1];var pressKey=function pressKey(event){if(canType.current){var key='';if(event instanceof KeyboardEvent){key=event.key.toUpperCase();}else{key=event.target.innerText.toUpperCase();event.target.blur();}socket.emit('key',key);setUserInput({key:key,time:event.timeStamp});}};var changeTyping=function changeTyping(status){canType.current=status;};var onMessage=function onMessage(newMessage){message.current=newMessage;setVisible(true);setTimeout(function(){return setVisible(false);},3000);};useEffect(function(){if(getPermission()!=='game'){navigate('/',{replace:true});return;}window.addEventListener('keydown',pressKey);socket.on('setCurrentPlayer',function(player){setCurrentPlayer(player);});socket.on('gameNotification',function(message){onMessage(message);});socket.on('returnToLobby',function(){permission.current='lobby';navigate('/lobby',{replace:true});});socket.emit('initialGameSettings');return function(){window.removeEventListener('keydown',pressKey);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"gamePage\",children:[/*#__PURE__*/_jsx(Notification,{visible:visible,message:message.current,position:\"middle-center\"}),/*#__PURE__*/_jsx(ColoredRow,{name:currentPlayer.name,color:currentPlayer.id===socket.id?'green':'none'}),/*#__PURE__*/_jsx(Game,{input:userInput,rowLength:settings.rows,colLength:settings.cols,word:settings.word,wordList:new Set(settings.wordList),handleKeyClick:pressKey,socket:socket,changeTyping:changeTyping,handleMessage:onMessage,currentPlayer:currentPlayer})]});};export default GamePage;","map":{"version":3,"sources":["C:/Users/andyc/Desktop/Web Programs/Wordle with Friends/client/src/components/pages/GamePage.jsx"],"names":["React","useNavigate","useState","useEffect","useRef","Notification","ColoredRow","Game","GamePage","socket","settings","permission","getPermission","key","time","userInput","setUserInput","name","id","leader","currentPlayer","setCurrentPlayer","canType","navigate","message","visible","setVisible","pressKey","event","current","KeyboardEvent","toUpperCase","target","innerText","blur","emit","timeStamp","changeTyping","status","onMessage","newMessage","setTimeout","replace","window","addEventListener","on","player","removeEventListener","rows","cols","word","Set","wordList"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,WAAR,KAA0B,kBAA1B,CACA,OAAQC,QAAR,CAAkBC,SAAlB,CAA6BC,MAA7B,KAA0C,OAA1C,CACA,MAAO,wBAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAmD,IAAjDC,CAAAA,MAAiD,MAAjDA,MAAiD,CAAzCC,QAAyC,MAAzCA,QAAyC,CAA/BC,UAA+B,MAA/BA,UAA+B,CAAnBC,aAAmB,MAAnBA,aAAmB,CAChE,cAAkCV,QAAQ,CAAC,CAACW,GAAG,CAAE,EAAN,CAAUC,IAAI,CAAE,CAAhB,CAAD,CAA1C,wCAAOC,SAAP,eAAkBC,YAAlB,eACA,eAA0Cd,QAAQ,CAAC,CAACe,IAAI,CAAE,QAAP,CAAiBC,EAAE,CAAET,MAAM,CAACS,EAA5B,CAAgCC,MAAM,CAAE,KAAxC,CAAD,CAAlD,yCAAOC,aAAP,eAAsBC,gBAAtB,eACA,GAAMC,CAAAA,OAAO,CAAGlB,MAAM,CAAC,KAAD,CAAtB,CACA,GAAMmB,CAAAA,QAAQ,CAAGtB,WAAW,EAA5B,CACA,GAAMuB,CAAAA,OAAO,CAAGpB,MAAM,CAAC,EAAD,CAAtB,CACA,eAA8BF,QAAQ,CAAC,KAAD,CAAtC,yCAAOuB,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CACxB,GAAIN,OAAO,CAACO,OAAZ,CAAqB,CACjB,GAAIhB,CAAAA,GAAG,CAAG,EAAV,CAEA,GAAIe,KAAK,WAAYE,CAAAA,aAArB,CAAoC,CAChCjB,GAAG,CAAGe,KAAK,CAACf,GAAN,CAAUkB,WAAV,EAAN,CACH,CAFD,IAEO,CACHlB,GAAG,CAAGe,KAAK,CAACI,MAAN,CAAaC,SAAb,CAAuBF,WAAvB,EAAN,CACAH,KAAK,CAACI,MAAN,CAAaE,IAAb,GACH,CAEDzB,MAAM,CAAC0B,IAAP,CAAY,KAAZ,CAAmBtB,GAAnB,EACAG,YAAY,CAAC,CAACH,GAAG,CAAEA,GAAN,CAAWC,IAAI,CAAEc,KAAK,CAACQ,SAAvB,CAAD,CAAZ,CACH,CACJ,CAdD,CAgBA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,MAAD,CAAY,CAC7BhB,OAAO,CAACO,OAAR,CAAkBS,MAAlB,CACH,CAFD,CAIA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,UAAD,CAAgB,CAC9BhB,OAAO,CAACK,OAAR,CAAkBW,UAAlB,CACAd,UAAU,CAAC,IAAD,CAAV,CACAe,UAAU,CAAC,iBAAMf,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAAD,CAA0B,IAA1B,CAAV,CACH,CAJD,CAMAvB,SAAS,CAAC,UAAM,CACZ,GAAIS,aAAa,KAAO,MAAxB,CAAgC,CAC5BW,QAAQ,CAAC,GAAD,CAAM,CAACmB,OAAO,CAAE,IAAV,CAAN,CAAR,CACA,OACH,CAEDC,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmCjB,QAAnC,EACAlB,MAAM,CAACoC,EAAP,CAAU,kBAAV,CAA8B,SAACC,MAAD,CAAY,CACtCzB,gBAAgB,CAACyB,MAAD,CAAhB,CACH,CAFD,EAIArC,MAAM,CAACoC,EAAP,CAAU,kBAAV,CAA8B,SAACrB,OAAD,CAAa,CACvCe,SAAS,CAACf,OAAD,CAAT,CACH,CAFD,EAIAf,MAAM,CAACoC,EAAP,CAAU,eAAV,CAA2B,UAAM,CAC7BlC,UAAU,CAACkB,OAAX,CAAqB,OAArB,CACAN,QAAQ,CAAC,QAAD,CAAW,CAACmB,OAAO,CAAE,IAAV,CAAX,CAAR,CACH,CAHD,EAKAjC,MAAM,CAAC0B,IAAP,CAAY,qBAAZ,EAEA,MAAO,WAAM,CACTQ,MAAM,CAACI,mBAAP,CAA2B,SAA3B,CAAsCpB,QAAtC,EACH,CAFD,CAGH,CAzBQ,CAyBN,EAzBM,CAAT,CA2BA,mBACI,aAAK,SAAS,CAAC,UAAf,wBACI,KAAC,YAAD,EACI,OAAO,CAAEF,OADb,CAEI,OAAO,CAAED,OAAO,CAACK,OAFrB,CAGI,QAAQ,CAAC,eAHb,EADJ,cAOI,KAAC,UAAD,EACI,IAAI,CAAET,aAAa,CAACH,IADxB,CAEI,KAAK,CAAEG,aAAa,CAACF,EAAd,GAAqBT,MAAM,CAACS,EAA5B,CAAiC,OAAjC,CAA2C,MAFtD,EAPJ,cAYI,KAAC,IAAD,EACI,KAAK,CAAEH,SADX,CAEI,SAAS,CAAEL,QAAQ,CAACsC,IAFxB,CAGI,SAAS,CAAEtC,QAAQ,CAACuC,IAHxB,CAII,IAAI,CAAEvC,QAAQ,CAACwC,IAJnB,CAKI,QAAQ,CAAE,GAAIC,CAAAA,GAAJ,CAAQzC,QAAQ,CAAC0C,QAAjB,CALd,CAMI,cAAc,CAAEzB,QANpB,CAOI,MAAM,CAAElB,MAPZ,CAQI,YAAY,CAAE4B,YARlB,CASI,aAAa,CAAEE,SATnB,CAUI,aAAa,CAAEnB,aAVnB,EAZJ,GADJ,CA2BH,CAxFD,CA0FA,cAAeZ,CAAAA,QAAf","sourcesContent":["import React from 'react'\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {useState, useEffect, useRef} from 'react'\r\nimport '../../css/GamePage.css';\r\nimport Notification from '../Notification.jsx'\r\nimport ColoredRow from '../ColoredRow.jsx';\r\nimport Game from '../Game.jsx'\r\n\r\nconst GamePage = ({socket, settings, permission, getPermission}) => {\r\n    const [userInput, setUserInput] = useState({key: '', time: 0})\r\n    const [currentPlayer, setCurrentPlayer] = useState({name: '------', id: socket.id, leader: false})\r\n    const canType = useRef(false)\r\n    const navigate = useNavigate()\r\n    const message = useRef('')\r\n    const [visible, setVisible] = useState(false)\r\n\r\n    const pressKey = (event) => {\r\n        if (canType.current) {\r\n            let key = ''\r\n\r\n            if (event instanceof KeyboardEvent) {\r\n                key = event.key.toUpperCase()\r\n            } else {\r\n                key = event.target.innerText.toUpperCase()\r\n                event.target.blur()\r\n            }\r\n\r\n            socket.emit('key', key)\r\n            setUserInput({key: key, time: event.timeStamp})\r\n        }\r\n    }\r\n\r\n    const changeTyping = (status) => {\r\n        canType.current = status\r\n    }\r\n\r\n    const onMessage = (newMessage) => {\r\n        message.current = newMessage\r\n        setVisible(true)\r\n        setTimeout(() => setVisible(false), 3000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (getPermission() !== 'game') {\r\n            navigate('/', {replace: true})\r\n            return\r\n        }\r\n\r\n        window.addEventListener('keydown', pressKey)\r\n        socket.on('setCurrentPlayer', (player) => {\r\n            setCurrentPlayer(player)\r\n        })\r\n\r\n        socket.on('gameNotification', (message) => {\r\n            onMessage(message)\r\n        })\r\n        \r\n        socket.on('returnToLobby', () => {\r\n            permission.current = 'lobby'\r\n            navigate('/lobby', {replace: true})\r\n        })\r\n\r\n        socket.emit('initialGameSettings')\r\n\r\n        return () => {\r\n            window.removeEventListener('keydown', pressKey)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"gamePage\">\r\n            <Notification \r\n                visible={visible} \r\n                message={message.current} \r\n                position='middle-center'\r\n            />\r\n\r\n            <ColoredRow \r\n                name={currentPlayer.name} \r\n                color={currentPlayer.id === socket.id ? 'green' : 'none'}\r\n            />\r\n\r\n            <Game \r\n                input={userInput} \r\n                rowLength={settings.rows} \r\n                colLength={settings.cols} \r\n                word={settings.word}\r\n                wordList={new Set(settings.wordList)}\r\n                handleKeyClick={pressKey}\r\n                socket={socket}\r\n                changeTyping={changeTyping}\r\n                handleMessage={onMessage}\r\n                currentPlayer={currentPlayer}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GamePage"]},"metadata":{},"sourceType":"module"}