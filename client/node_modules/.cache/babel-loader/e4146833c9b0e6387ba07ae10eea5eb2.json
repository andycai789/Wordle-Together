{"ast":null,"code":"import _slicedToArray from\"C:/Users/andyc/Desktop/Web Programs/Wordle with Friends/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useNavigate}from\"react-router-dom\";import{useState,useEffect,useRef}from'react';import Game from'../Game.jsx';import ColoredRow from'../ColoredRow.jsx';import'../../css/GamePage.css';import Notification from'../Notification.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GamePage=function GamePage(_ref){var socket=_ref.socket,settings=_ref.settings,permission=_ref.permission,getPermission=_ref.getPermission;var _useState=useState({key:'',time:0}),_useState2=_slicedToArray(_useState,2),userInput=_useState2[0],setUserInput=_useState2[1];var _useState3=useState({name:'------',id:socket.id,leader:false}),_useState4=_slicedToArray(_useState3,2),currentPlayer=_useState4[0],setCurrentPlayer=_useState4[1];var canType=useRef(false);var navigate=useNavigate();var message=useRef('');var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),visible=_useState6[0],setVisible=_useState6[1];var pressKey=function pressKey(event){if(canType.current){var key=event instanceof KeyboardEvent?event.key.toUpperCase():event.target.innerText.toUpperCase();socket.emit('key',key);setUserInput({key:key,time:event.timeStamp});}};var changeTyping=function changeTyping(status){canType.current=status;};var onMessage=function onMessage(newMessage){message.current=newMessage;setVisible(true);setTimeout(function(){return setVisible(false);},3000);};useEffect(function(){if(getPermission()!=='game'){navigate('/',{replace:true});return;}window.addEventListener('keydown',pressKey);socket.on('setCurrentPlayer',function(player){setCurrentPlayer(player);});socket.on('gameNotification',function(message){console.log(\"GOT IT\");onMessage(message);});socket.on('returnToLobby',function(){permission.current='lobby';navigate('/lobby',{replace:true});});socket.emit('initialGameSettings');return function(){window.removeEventListener('keydown',pressKey);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"gamePage\",children:[/*#__PURE__*/_jsx(Notification,{visible:visible,message:message.current,position:\"middle-center\"}),/*#__PURE__*/_jsx(\"div\",{className:\"playerTurn\",children:/*#__PURE__*/_jsx(ColoredRow,{name:currentPlayer.name,colors:currentPlayer.id===socket.id?'gggggg':'zzzzzz'})}),/*#__PURE__*/_jsx(Game,{input:userInput,rowLength:settings.rows,colLength:settings.cols,word:settings.word,wordList:new Set(settings.wordList),handleKeyClick:pressKey,socket:socket,changeTyping:changeTyping,handleMessage:onMessage})]});};export default GamePage;","map":{"version":3,"sources":["C:/Users/andyc/Desktop/Web Programs/Wordle with Friends/client/src/components/pages/GamePage.jsx"],"names":["React","useNavigate","useState","useEffect","useRef","Game","ColoredRow","Notification","GamePage","socket","settings","permission","getPermission","key","time","userInput","setUserInput","name","id","leader","currentPlayer","setCurrentPlayer","canType","navigate","message","visible","setVisible","pressKey","event","current","KeyboardEvent","toUpperCase","target","innerText","emit","timeStamp","changeTyping","status","onMessage","newMessage","setTimeout","replace","window","addEventListener","on","player","console","log","removeEventListener","rows","cols","word","Set","wordList"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {useState, useEffect, useRef} from 'react'\r\nimport Game from '../Game.jsx'\r\nimport ColoredRow from '../ColoredRow.jsx';\r\nimport '../../css/GamePage.css';\r\nimport Notification from '../Notification.jsx'\r\n\r\nconst GamePage = ({socket, settings, permission, getPermission}) => {\r\n    const [userInput, setUserInput] = useState({key: '', time: 0})\r\n    const [currentPlayer, setCurrentPlayer] = useState({name: '------', id: socket.id, leader: false})\r\n    const canType = useRef(false)\r\n    const navigate = useNavigate()\r\n    const message = useRef('')\r\n    const [visible, setVisible] = useState(false)\r\n\r\n    const pressKey = (event) => {\r\n        if (canType.current) {\r\n            let key = (event instanceof KeyboardEvent) ? event.key.toUpperCase() : event.target.innerText.toUpperCase()\r\n            socket.emit('key', key)\r\n            setUserInput({key: key, time: event.timeStamp})\r\n        }\r\n    }\r\n\r\n    const changeTyping = (status) => {\r\n        canType.current = status\r\n    }\r\n\r\n    const onMessage = (newMessage) => {\r\n        message.current = newMessage\r\n        setVisible(true)\r\n        setTimeout(() => setVisible(false), 3000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (getPermission() !== 'game') {\r\n            navigate('/', {replace: true})\r\n            return\r\n        }\r\n\r\n        window.addEventListener('keydown', pressKey)\r\n        socket.on('setCurrentPlayer', (player) => {\r\n            setCurrentPlayer(player)\r\n        })\r\n\r\n        socket.on('gameNotification', (message) => {\r\n            console.log(\"GOT IT\")\r\n            onMessage(message)\r\n        })\r\n        \r\n        socket.on('returnToLobby', () => {\r\n            permission.current = 'lobby'\r\n            navigate('/lobby', {replace: true})\r\n        })\r\n\r\n        socket.emit('initialGameSettings')\r\n\r\n        return () => {\r\n            window.removeEventListener('keydown', pressKey)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"gamePage\">\r\n            <Notification visible={visible} message={message.current} position='middle-center'/>\r\n\r\n            <div className=\"playerTurn\">\r\n                <ColoredRow \r\n                    name={currentPlayer.name} \r\n                    colors={currentPlayer.id === socket.id ? 'gggggg' : 'zzzzzz'}\r\n                />\r\n            </div>\r\n\r\n            <Game \r\n                input={userInput} \r\n                rowLength={settings.rows} \r\n                colLength={settings.cols} \r\n                word={settings.word}\r\n                wordList={new Set(settings.wordList)}\r\n                handleKeyClick={pressKey}\r\n                socket={socket}\r\n                changeTyping={changeTyping}\r\n                handleMessage={onMessage}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GamePage"]},"metadata":{},"sourceType":"module"}